N0REP0
### ## global_variable_names
### #   opam-version The currently running opam version
### #   switch       The identifier of the current switch
### #   jobs         The number of parallel jobs set up in opam configuration
### #   root         The current opam root directory
### #   make         The 'make' command to use
### #
### ## package_variable_names
### #   name      Name of the package
### #   version   Version of the package
### #   depends   Resolved direct dependencies of the package
### #   installed Whether the package is installed
### #   enable    Takes the value enable or disable depending on whether the package is installed
### #   pinned    Whether the package is pinned
### #   bin       Binary directory for this package
### #   sbin      System binary directory for this package
### #   lib       Library directory for this package
### #   man       Man directory for this package
### #   doc       Doc directory for this package
### #   share     Share directory for this package
### #   etc       Etc directory for this package
### #   build     Directory where the package was built
### #   hash      Hash of the package archive
### #   dev       True if this is a development package
### #   build-id  A hash identifying the precise package version with all its dependencies
### #   opamfile  Path of the current opam file
### #
### ## post-messages
### #   success
### #   failure
### #   with-dev-setup
### #
### ## post-install wrapper
### #   installed-files
### ::::::::
### :: Setup
### ::::::::
### OPAMYES=1
### opam --version >$ OPAMVERSION
### opam option --global jobs=2
Set to '2' the field jobs in global configuration
### <printer.sh>
for i in "$@"; do
  echo "$i"
done
### <pkg:dep.1>
opam-version: "2.0"
### <pkg:i-am-a-repo-pkg.1>
opam-version: "2.0"
depends: "dep"
build: [ "a-build-command" ]
install: [ "a-install-command" ]
remove: [ "a-remove-command" ]
### <i-am-a-repo-pkg.install>
opam-version: "2.0"
etc: [
  "printer.sh" {"printer"}
]
### tar czf archive.tgz printer.sh i-am-a-repo-pkg.install
### openssl md5 archive.tgz | '.*= ' -> '' >$ MD5
### sh -c "echo '$MD5' | cut -c 1-2" >$ PRE_MD5
### <add-url.sh>
basedir=$(printf '%s' "$BASEDIR" | sed 's/\\/\\\\/g')
cat << EOF >> REPO/packages/i-am-a-repo-pkg/i-am-a-repo-pkg.1/opam
url {
  src:"file://$basedir/archive.tgz"
  checksum: "md5=$MD5"
}
EOF
### sh add-url.sh
### opam update

<><> Updating package repositories ><><><><><><><><><><><><><><><><><><><><><><>
[default] synchronised from file://${BASEDIR}/REPO
Now run 'opam upgrade' to apply any package updates.
### ::::::::::::::::::
### :: Global wrappers
### ::::::::::::::::::
### mkdir -p OPAM/opam-init/hooks
### cp printer.sh OPAM/opam-init/hooks/printer.sh
### cp OPAM/config OPAM/config.bak
### opam option --global 'pre-build-commands=[ "bash" "%{hooks}%/printer.sh" "...pre building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...pre building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field pre-build-commands in global configuration
### opam option --global 'pre-install-commands=[ "bash" "%{hooks}%/printer.sh" "...pre installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...pre installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field pre-install-commands in global configuration
### opam option --global 'pre-remove-commands=[ "bash" "%{hooks}%/printer.sh" "...pre removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...pre removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field pre-remove-commands in global configuration
### opam option --global 'wrap-build-commands=[ "bash" "%{hooks}%/printer.sh" "...building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field wrap-build-commands in global configuration
### opam option --global 'wrap-install-commands=[ "bash" "%{hooks}%/printer.sh" "...installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field wrap-install-commands in global configuration
### opam option --global 'wrap-remove-commands=[ "bash" "%{hooks}%/printer.sh" "...removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field wrap-remove-commands in global configuration
### opam option --global 'post-build-commands=[ "bash" "%{hooks}%/printer.sh" "...post-building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...post-building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field post-build-commands in global configuration
### opam option --global 'post-install-commands=[ "bash" "%{hooks}%/printer.sh" "...post-installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...post-installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field post-install-commands in global configuration
### opam option --global 'post-remove-commands=[ "bash" "%{hooks}%/printer.sh" "...post-removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...post-removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field post-remove-commands in global configuration
### opam switch create global-wrappers --empty
### opam install dep
The following actions will be performed:
=== install 1 package
  - install dep 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed dep.1
Done.
### opam install i-am-a-repo-pkg -vv | "${OPAMVERSION}" -> "++current++" | '[0-9a-z]{64}' -> '+hash+' | $MD5 -> +archive-hash+ | sed-cmd bash tar rsync | etc -> etc
The following actions will be performed:
=== install 1 package
  - install i-am-a-repo-pkg 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/3: [i-am-a-repo-pkg.1: rsync]
+ rsync "-rLptgoDvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--exclude" "_opam*" "--exclude" "_build" "--delete" "--delete-excluded" "${BASEDIR}/archive.tgz" "${OPAMTMP}"
- archive.tgz
- 
Processing  1/3: [i-am-a-repo-pkg.1: extract]
+ tar "xfz" "${OPAMTMP}/archive.tgz" "-C" "${OPAMTMP}"
-> retrieved i-am-a-repo-pkg.1  (file://${BASEDIR}/archive.tgz)
Processing  2/3: [i-am-a-repo-pkg: bash ...pre building...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...pre building..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...pre building...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
Processing  2/3: [i-am-a-repo-pkg: a-build-command]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...building..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" "a-build-command" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...building...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
- a-build-command
Processing  2/3: [i-am-a-repo-pkg: bash ...post-building...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...post-building..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...post-building...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
-> compiled  i-am-a-repo-pkg.1
Processing  3/3: [i-am-a-repo-pkg: bash ...pre installing...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...pre installing..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...pre installing...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
Processing  3/3: [i-am-a-repo-pkg: a-install-command]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...installing..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" "a-install-command" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...installing...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
- a-install-command
Processing  3/3: [i-am-a-repo-pkg: bash ...post-installing...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...post-installing..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:etc etc/i-am-a-repo-pkg etc/i-am-a-repo-pkg/printer" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...post-installing...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:etc etc/i-am-a-repo-pkg etc/i-am-a-repo-pkg/printer
-> installed i-am-a-repo-pkg.1
Done.
### opam remove i-am-a-repo-pkg -vv | "${OPAMVERSION}" -> "++current++" | '[0-9a-z]{64}' -> '+hash+' | '${PRE_MD5}..?${MD5}' -> pre/+archive-hash+ | $MD5 -> +archive-hash+ | sed-cmd bash tar
The following actions will be performed:
=== remove 1 package
  - remove i-am-a-repo-pkg 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/2: [i-am-a-repo-pkg.1: extract]
+ tar "xfz" "${BASEDIR}/OPAM/download-cache/md5/pre/+archive-hash+" "-C" "${OPAMTMP}"
-> retrieved i-am-a-repo-pkg.1  (cached)
Processing  2/2: [i-am-a-repo-pkg: bash ...pre removing...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...pre removing..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:true" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${BASEDIR}/OPAM/global-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/remove/i-am-a-repo-pkg.1)
- ...pre removing...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:true
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${BASEDIR}/OPAM/global-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam
- installed-files:
Processing  2/2: [i-am-a-repo-pkg: a-remove-command]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...removing..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:true" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${BASEDIR}/OPAM/global-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam" "installed-files:" "a-remove-command" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/remove/i-am-a-repo-pkg.1)
- ...removing...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:true
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${BASEDIR}/OPAM/global-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam
- installed-files:
- a-remove-command
Processing  2/2: [i-am-a-repo-pkg: bash ...post-removing...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...post-removing..." "opam-version:++current++" "switch:global-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:true" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/global-wrappers/bin" "sbin:${BASEDIR}/OPAM/global-wrappers/sbin" "lib:${BASEDIR}/OPAM/global-wrappers/lib" "man:${BASEDIR}/OPAM/global-wrappers/man" "doc:${BASEDIR}/OPAM/global-wrappers/doc" "share:${BASEDIR}/OPAM/global-wrappers/share" "etc:${BASEDIR}/OPAM/global-wrappers/etc" "build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${BASEDIR}/OPAM/global-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/global-wrappers/.opam-switch/remove/i-am-a-repo-pkg.1)
- ...post-removing...
- opam-version:++current++
- switch:global-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:true
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/global-wrappers/bin
- sbin:${BASEDIR}/OPAM/global-wrappers/sbin
- lib:${BASEDIR}/OPAM/global-wrappers/lib
- man:${BASEDIR}/OPAM/global-wrappers/man
- doc:${BASEDIR}/OPAM/global-wrappers/doc
- share:${BASEDIR}/OPAM/global-wrappers/share
- etc:${BASEDIR}/OPAM/global-wrappers/etc
- build:${BASEDIR}/OPAM/global-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${BASEDIR}/OPAM/global-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam
- installed-files:
-> removed   i-am-a-repo-pkg.1
Done.
### cp OPAM/config.bak OPAM/config
### ::::::::::::::::::
### :: Switch wrappers
### ::::::::::::::::::
### opam switch create switch-wrappers --empty
### opam option --switch switch-wrappers 'pre-build-commands=[ "bash" "%{hooks}%/printer.sh" "...pre building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...pre building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field pre-build-commands in switch switch-wrappers
### opam option --switch switch-wrappers 'pre-install-commands=[ "bash" "%{hooks}%/printer.sh" "...pre installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...pre installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field pre-install-commands in switch switch-wrappers
### opam option --switch switch-wrappers 'pre-remove-commands=[ "bash" "%{hooks}%/printer.sh" "...pre removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...pre removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field pre-remove-commands in switch switch-wrappers
### opam option --switch switch-wrappers 'wrap-build-commands=[ "bash" "%{hooks}%/printer.sh" "...building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field wrap-build-commands in switch switch-wrappers
### opam option --switch switch-wrappers 'wrap-install-commands=[ "bash" "%{hooks}%/printer.sh" "...installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field wrap-install-commands in switch switch-wrappers
### opam option --switch switch-wrappers 'wrap-remove-commands=[ "bash" "%{hooks}%/printer.sh" "...removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field wrap-remove-commands in switch switch-wrappers
### opam option --switch switch-wrappers 'post-build-commands=[ "bash" "%{hooks}%/printer.sh" "...post-building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...post-building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field post-build-commands in switch switch-wrappers
### opam option --switch switch-wrappers 'post-install-commands=[ "bash" "%{hooks}%/printer.sh" "...post-installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...post-installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" "installed-files:%{installed-files}%" ]' the field post-install-commands in switch switch-wrappers
### opam option --switch switch-wrappers 'post-remove-commands=[ "bash" "%{hooks}%/printer.sh" "...post-removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]'
Set to '[ "bash" "%{hooks}%/printer.sh" "...post-removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]' the field post-remove-commands in switch switch-wrappers
### opam install dep
The following actions will be performed:
=== install 1 package
  - install dep 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed dep.1
Done.
### opam install i-am-a-repo-pkg -vv | "${OPAMVERSION}" -> "++current++" | '[0-9a-z]{64}' -> '+hash+' | '${PRE_MD5}..?${MD5}' -> pre/+archive-hash+ | $MD5 -> +archive-hash+ | sed-cmd bash tar | etc -> etc
The following actions will be performed:
=== install 1 package
  - install i-am-a-repo-pkg 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/3: [i-am-a-repo-pkg.1: extract]
+ tar "xfz" "${BASEDIR}/OPAM/download-cache/md5/pre/+archive-hash+" "-C" "${OPAMTMP}"
-> retrieved i-am-a-repo-pkg.1  (cached)
Processing  2/3: [i-am-a-repo-pkg: bash ...pre building...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...pre building..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...pre building...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
Processing  2/3: [i-am-a-repo-pkg: a-build-command]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...building..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" "a-build-command" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...building...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
- a-build-command
Processing  2/3: [i-am-a-repo-pkg: bash ...post-building...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...post-building..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...post-building...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
-> compiled  i-am-a-repo-pkg.1
Processing  3/3: [i-am-a-repo-pkg: bash ...pre installing...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...pre installing..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...pre installing...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
Processing  3/3: [i-am-a-repo-pkg: a-install-command]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...installing..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:" "a-install-command" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...installing...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:
- a-install-command
Processing  3/3: [i-am-a-repo-pkg: bash ...post-installing...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...post-installing..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:false" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${OPAMTMP}/opam" "installed-files:etc etc/i-am-a-repo-pkg etc/i-am-a-repo-pkg/printer" "installed-files:etc etc/i-am-a-repo-pkg etc/i-am-a-repo-pkg/printer" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1)
- ...post-installing...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:false
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${OPAMTMP}/opam
- installed-files:etc etc/i-am-a-repo-pkg etc/i-am-a-repo-pkg/printer
- installed-files:etc etc/i-am-a-repo-pkg etc/i-am-a-repo-pkg/printer
-> installed i-am-a-repo-pkg.1
Done.
### opam remove i-am-a-repo-pkg -vv | "${OPAMVERSION}" -> "++current++" | '[0-9a-z]{64}' -> '+hash+' | '${PRE_MD5}..?${MD5}' -> pre/+archive-hash+ | $MD5 -> +archive-hash+ | sed-cmd bash tar
The following actions will be performed:
=== remove 1 package
  - remove i-am-a-repo-pkg 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/2: [i-am-a-repo-pkg.1: extract]
+ tar "xfz" "${BASEDIR}/OPAM/download-cache/md5/pre/+archive-hash+" "-C" "${OPAMTMP}"
-> retrieved i-am-a-repo-pkg.1  (cached)
Processing  2/2: [i-am-a-repo-pkg: bash ...pre removing...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...pre removing..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:true" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/remove/i-am-a-repo-pkg.1)
- ...pre removing...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:true
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam
- installed-files:
Processing  2/2: [i-am-a-repo-pkg: a-remove-command]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...removing..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:true" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam" "installed-files:" "a-remove-command" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/remove/i-am-a-repo-pkg.1)
- ...removing...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:true
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam
- installed-files:
- a-remove-command
Processing  2/2: [i-am-a-repo-pkg: bash ...post-removing...]
+ bash "${BASEDIR}/OPAM/opam-init/hooks/printer.sh" "...post-removing..." "opam-version:++current++" "switch:switch-wrappers" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:true" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/switch-wrappers/bin" "sbin:${BASEDIR}/OPAM/switch-wrappers/sbin" "lib:${BASEDIR}/OPAM/switch-wrappers/lib" "man:${BASEDIR}/OPAM/switch-wrappers/man" "doc:${BASEDIR}/OPAM/switch-wrappers/doc" "share:${BASEDIR}/OPAM/switch-wrappers/share" "etc:${BASEDIR}/OPAM/switch-wrappers/etc" "build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/switch-wrappers/.opam-switch/remove/i-am-a-repo-pkg.1)
- ...post-removing...
- opam-version:++current++
- switch:switch-wrappers
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:true
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/switch-wrappers/bin
- sbin:${BASEDIR}/OPAM/switch-wrappers/sbin
- lib:${BASEDIR}/OPAM/switch-wrappers/lib
- man:${BASEDIR}/OPAM/switch-wrappers/man
- doc:${BASEDIR}/OPAM/switch-wrappers/doc
- share:${BASEDIR}/OPAM/switch-wrappers/share
- etc:${BASEDIR}/OPAM/switch-wrappers/etc
- build:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${BASEDIR}/OPAM/switch-wrappers/.opam-switch/packages/i-am-a-repo-pkg.1/opam
- installed-files:
-> removed   i-am-a-repo-pkg.1
Done.
### ::::::::::::::::::::
### :: Package from repo
### ::::::::::::::::::::
### # "build:%{build}%" "post:%{post}%" "with-test:%{with-test}%" "with-doc:%{with-doc}%" "with-dev-setup:%{with-dev-setup}%" "dev:%{dev}%"
### <pkg:i-am-a-repo-pkg.1>
opam-version: "2.0"
depends: "dep"
build: [ "bash" "printer.sh" "...building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]
install: [ "bash" "printer.sh" "...installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]
remove: [ "bash" "printer.sh" "...removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]
post-messages:
"""...A last message...
opam-version:%{opam-version}%
switch:%{switch}%
jobs:%{jobs}%
root:%{root}%
make:%{make}%
name:%{name}%
version:%{version}%
depends:%{depends}%
installed:%{installed}%
enable:%{enable}%
pinned:%{pinned}%
bin:%{bin}%
sbin:%{sbin}%
lib:%{lib}%
man:%{man}%
doc:%{doc}%
share:%{share}%
etc:%{etc}%
build:%{build}%
hash:%{hash}%
dev:%{dev}%
build-id:%{build-id}%
opamfile:%{opamfile}%
with-dev-setup:%{with-dev-setup}%
success:%{success}%
failure:%{failure}%
installed-files:%{installed-files}%
"""
### <add-url.sh>
basedir=$(printf '%s' "$BASEDIR" | sed 's/\\/\\\\/g')
cat << EOF >> REPO/packages/i-am-a-repo-pkg/i-am-a-repo-pkg.1/opam
url {
  src:"file://$basedir/archive.tgz"
  checksum: "md5=$(openssl md5 archive.tgz | cut -f2 -d' ')"
}
EOF
### sh add-url.sh
### opam update

<><> Updating package repositories ><><><><><><><><><><><><><><><><><><><><><><>
[default] synchronised from file://${BASEDIR}/REPO
Now run 'opam upgrade' to apply any package updates.
### opam switch create pkg-from-repo --empty
### opam install dep
The following actions will be performed:
=== install 1 package
  - install dep 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed dep.1
Done.
### opam install i-am-a-repo-pkg | "${OPAMVERSION}" -> "++current++" | '[0-9a-z]{64}' -> '+hash+' | '${PRE_MD5}..?${MD5}' -> pre/+archive-hash+ | $MD5 -> +archive-hash+ | sed-cmd bash tar | etc -> etc
The following actions will be performed:
=== install 1 package
  - install i-am-a-repo-pkg 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> retrieved i-am-a-repo-pkg.1  (cached)
-> installed i-am-a-repo-pkg.1
Done.

<><> i-am-a-repo-pkg.1 installed successfully <><><><><><><><><><><><><><><><><>
=> ...A last message...
   opam-version:++current++
   switch:pkg-from-repo
   jobs:2
   root:${BASEDIR}/OPAM
   make:make
   name:i-am-a-repo-pkg
   version:1
   depends:dep.1
   installed:true
   enable:
   pinned:false
   bin:${BASEDIR}/OPAM/pkg-from-repo/bin
   sbin:${BASEDIR}/OPAM/pkg-from-repo/sbin
   lib:${BASEDIR}/OPAM/pkg-from-repo/lib
   man:${BASEDIR}/OPAM/pkg-from-repo/man
   doc:${BASEDIR}/OPAM/pkg-from-repo/doc
   share:${BASEDIR}/OPAM/pkg-from-repo/share
   etc:${BASEDIR}/OPAM/pkg-from-repo/etc
   build:${BASEDIR}/OPAM/pkg-from-repo/.opam-switch/build/i-am-a-repo-pkg.1
   hash:md5=+archive-hash+
   dev:false
   build-id:+hash+
   opamfile:${BASEDIR}/OPAM/pkg-from-repo/.opam-switch/packages/i-am-a-repo-pkg.1/opam
   with-dev-setup:false
   success:true
   failure:false
   installed-files:
### opam remove i-am-a-repo-pkg -vv | "${OPAMVERSION}" -> "++current++" | '[0-9a-z]{64}' -> '+hash+' | '${PRE_MD5}..?${MD5}' -> pre/+archive-hash+ | $MD5 -> +archive-hash+ | sed-cmd bash tar
The following actions will be performed:
=== remove 1 package
  - remove i-am-a-repo-pkg 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/2: [i-am-a-repo-pkg.1: extract]
+ tar "xfz" "${BASEDIR}/OPAM/download-cache/md5/pre/+archive-hash+" "-C" "${OPAMTMP}"
-> retrieved i-am-a-repo-pkg.1  (cached)
Processing  2/2: [i-am-a-repo-pkg: bash printer.sh]
+ bash "printer.sh" "...removing..." "opam-version:++current++" "switch:pkg-from-repo" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-repo-pkg" "version:1" "depends:dep.1" "installed:true" "enable:" "pinned:false" "bin:${BASEDIR}/OPAM/pkg-from-repo/bin" "sbin:${BASEDIR}/OPAM/pkg-from-repo/sbin" "lib:${BASEDIR}/OPAM/pkg-from-repo/lib" "man:${BASEDIR}/OPAM/pkg-from-repo/man" "doc:${BASEDIR}/OPAM/pkg-from-repo/doc" "share:${BASEDIR}/OPAM/pkg-from-repo/share" "etc:${BASEDIR}/OPAM/pkg-from-repo/etc" "build:${BASEDIR}/OPAM/pkg-from-repo/.opam-switch/build/i-am-a-repo-pkg.1" "hash:md5=+archive-hash+" "dev:false" "build-id:+hash+" "opamfile:${BASEDIR}/OPAM/pkg-from-repo/.opam-switch/packages/i-am-a-repo-pkg.1/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/pkg-from-repo/.opam-switch/remove/i-am-a-repo-pkg.1)
- ...removing...
- opam-version:++current++
- switch:pkg-from-repo
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-repo-pkg
- version:1
- depends:dep.1
- installed:true
- enable:
- pinned:false
- bin:${BASEDIR}/OPAM/pkg-from-repo/bin
- sbin:${BASEDIR}/OPAM/pkg-from-repo/sbin
- lib:${BASEDIR}/OPAM/pkg-from-repo/lib
- man:${BASEDIR}/OPAM/pkg-from-repo/man
- doc:${BASEDIR}/OPAM/pkg-from-repo/doc
- share:${BASEDIR}/OPAM/pkg-from-repo/share
- etc:${BASEDIR}/OPAM/pkg-from-repo/etc
- build:${BASEDIR}/OPAM/pkg-from-repo/.opam-switch/build/i-am-a-repo-pkg.1
- hash:md5=+archive-hash+
- dev:false
- build-id:+hash+
- opamfile:${BASEDIR}/OPAM/pkg-from-repo/.opam-switch/packages/i-am-a-repo-pkg.1/opam
- installed-files:
-> removed   i-am-a-repo-pkg.1
Done.
### ::::::::::::::::::::::
### :: Package from pinned
### ::::::::::::::::::::::
### <dir/i-am-a-pin-pkg.opam>
opam-version: "2.0"
version: "6.28"
depends: "dep"
build: [ "bash" "printer.sh" "...building..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]
install: [ "bash" "printer.sh" "...installing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]
remove: [ "bash" "printer.sh" "...removing..." "opam-version:%{opam-version}%" "switch:%{switch}%" "jobs:%{jobs}%" "root:%{root}%" "make:%{make}%" "name:%{name}%" "version:%{version}%" "depends:%{depends}%" "installed:%{installed}%" "enable:%{enable}%" "pinned:%{pinned}%" "bin:%{bin}%" "sbin:%{sbin}%" "lib:%{lib}%" "man:%{man}%" "doc:%{doc}%" "share:%{share}%" "etc:%{etc}%" "build:%{build}%" "hash:%{hash}%" "dev:%{dev}%" "build-id:%{build-id}%" "opamfile:%{opamfile}%" "installed-files:%{installed-files}%" ]
post-messages:
"""...A last message...
opam-version:%{opam-version}%
switch:%{switch}%
jobs:%{jobs}%
root:%{root}%
make:%{make}%
name:%{name}%
version:%{version}%
depends:%{depends}%
installed:%{installed}%
enable:%{enable}%
pinned:%{pinned}%
bin:%{bin}%
sbin:%{sbin}%
lib:%{lib}%
man:%{man}%
doc:%{doc}%
share:%{share}%
etc:%{etc}%
build:%{build}%
hash:%{hash}%
dev:%{dev}%
build-id:%{build-id}%
opamfile:%{opamfile}%
with-dev-setup:%{with-dev-setup}%
success:%{success}%
failure:%{failure}%
installed-files:%{installed-files}%
"""
### cp printer.sh dir/printer.sh
### cp i-am-a-repo-pkg.install dir/i-a-am-a-pin-pkg.install
### opam switch create pkg-from-pin --empty
### OPAMVERBOSE=0 opam pin ./dir -yn
[NOTE] Package i-am-a-pin-pkg does not exist in opam repositories registered in the current switch.
i-am-a-pin-pkg is now pinned to file://${BASEDIR}/dir (version 6.28)
### opam install dep
The following actions will be performed:
=== install 1 package
  - install dep 1

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed dep.1
Done.
### opam install i-am-a-pin-pkg -vv | "${OPAMVERSION}" -> "++current++" | '[0-9a-z]{64}' -> '+hash+' | grep -v "total size" | sed-cmd bash rsync | etc -> etc

<><> Synchronising pinned packages ><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/1: [i-am-a-pin-pkg.6.28: rsync]
+ rsync "-rLptgoDvc" "--exclude" ".git" "--exclude" "_darcs" "--exclude" ".hg" "--exclude" ".#*" "--exclude" "_opam*" "--exclude" "_build" "--delete" "--delete-excluded" "${BASEDIR}/dir/" "${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/sources/i-am-a-pin-pkg"
- 
[i-am-a-pin-pkg.6.28] synchronised (no changes)

The following actions will be performed:
=== install 1 package
  - install i-am-a-pin-pkg 6.28 (pinned)

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/3: [i-am-a-pin-pkg: bash printer.sh]
+ bash "printer.sh" "...building..." "opam-version:++current++" "switch:pkg-from-pin" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-pin-pkg" "version:6.28" "depends:dep.1" "installed:false" "enable:" "pinned:true" "bin:${BASEDIR}/OPAM/pkg-from-pin/bin" "sbin:${BASEDIR}/OPAM/pkg-from-pin/sbin" "lib:${BASEDIR}/OPAM/pkg-from-pin/lib" "man:${BASEDIR}/OPAM/pkg-from-pin/man" "doc:${BASEDIR}/OPAM/pkg-from-pin/doc" "share:${BASEDIR}/OPAM/pkg-from-pin/share" "etc:${BASEDIR}/OPAM/pkg-from-pin/etc" "build:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28" "hash:" "dev:true" "build-id:" "opamfile:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/overlay/i-am-a-pin-pkg/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28)
- ...building...
- opam-version:++current++
- switch:pkg-from-pin
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-pin-pkg
- version:6.28
- depends:dep.1
- installed:false
- enable:
- pinned:true
- bin:${BASEDIR}/OPAM/pkg-from-pin/bin
- sbin:${BASEDIR}/OPAM/pkg-from-pin/sbin
- lib:${BASEDIR}/OPAM/pkg-from-pin/lib
- man:${BASEDIR}/OPAM/pkg-from-pin/man
- doc:${BASEDIR}/OPAM/pkg-from-pin/doc
- share:${BASEDIR}/OPAM/pkg-from-pin/share
- etc:${BASEDIR}/OPAM/pkg-from-pin/etc
- build:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28
- hash:
- dev:true
- build-id:
- opamfile:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/overlay/i-am-a-pin-pkg/opam
- installed-files:
-> compiled  i-am-a-pin-pkg.6.28
Processing  3/3: [i-am-a-pin-pkg: bash printer.sh]
+ bash "printer.sh" "...installing..." "opam-version:++current++" "switch:pkg-from-pin" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-pin-pkg" "version:6.28" "depends:dep.1" "installed:false" "enable:" "pinned:true" "bin:${BASEDIR}/OPAM/pkg-from-pin/bin" "sbin:${BASEDIR}/OPAM/pkg-from-pin/sbin" "lib:${BASEDIR}/OPAM/pkg-from-pin/lib" "man:${BASEDIR}/OPAM/pkg-from-pin/man" "doc:${BASEDIR}/OPAM/pkg-from-pin/doc" "share:${BASEDIR}/OPAM/pkg-from-pin/share" "etc:${BASEDIR}/OPAM/pkg-from-pin/etc" "build:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28" "hash:" "dev:true" "build-id:" "opamfile:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/overlay/i-am-a-pin-pkg/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28)
- ...installing...
- opam-version:++current++
- switch:pkg-from-pin
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-pin-pkg
- version:6.28
- depends:dep.1
- installed:false
- enable:
- pinned:true
- bin:${BASEDIR}/OPAM/pkg-from-pin/bin
- sbin:${BASEDIR}/OPAM/pkg-from-pin/sbin
- lib:${BASEDIR}/OPAM/pkg-from-pin/lib
- man:${BASEDIR}/OPAM/pkg-from-pin/man
- doc:${BASEDIR}/OPAM/pkg-from-pin/doc
- share:${BASEDIR}/OPAM/pkg-from-pin/share
- etc:${BASEDIR}/OPAM/pkg-from-pin/etc
- build:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28
- hash:
- dev:true
- build-id:
- opamfile:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/overlay/i-am-a-pin-pkg/opam
- installed-files:
-> installed i-am-a-pin-pkg.6.28
Done.

<><> i-am-a-pin-pkg.6.28 installed successfully <><><><><><><><><><><><><><><><>
=> ...A last message...
   opam-version:++current++
   switch:pkg-from-pin
   jobs:2
   root:${BASEDIR}/OPAM
   make:make
   name:i-am-a-pin-pkg
   version:6.28
   depends:dep.1
   installed:true
   enable:
   pinned:true
   bin:${BASEDIR}/OPAM/pkg-from-pin/bin
   sbin:${BASEDIR}/OPAM/pkg-from-pin/sbin
   lib:${BASEDIR}/OPAM/pkg-from-pin/lib
   man:${BASEDIR}/OPAM/pkg-from-pin/man
   doc:${BASEDIR}/OPAM/pkg-from-pin/doc
   share:${BASEDIR}/OPAM/pkg-from-pin/share
   etc:${BASEDIR}/OPAM/pkg-from-pin/etc
   build:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28
   hash:
   dev:true
   build-id:
   opamfile:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/packages/i-am-a-pin-pkg.6.28/opam
   with-dev-setup:false
   success:true
   failure:false
   installed-files:
### opam remove i-am-a-pin-pkg -vv | "${OPAMVERSION}" -> "++current++" | '[0-9a-z]{64}' -> '+hash+' | sed-cmd bash
The following actions will be performed:
=== remove 1 package
  - remove i-am-a-pin-pkg 6.28 (pinned)

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  2/2: [i-am-a-pin-pkg: bash printer.sh]
+ bash "printer.sh" "...removing..." "opam-version:++current++" "switch:pkg-from-pin" "jobs:2" "root:${BASEDIR}/OPAM" "make:make" "name:i-am-a-pin-pkg" "version:6.28" "depends:dep.1" "installed:true" "enable:" "pinned:true" "bin:${BASEDIR}/OPAM/pkg-from-pin/bin" "sbin:${BASEDIR}/OPAM/pkg-from-pin/sbin" "lib:${BASEDIR}/OPAM/pkg-from-pin/lib" "man:${BASEDIR}/OPAM/pkg-from-pin/man" "doc:${BASEDIR}/OPAM/pkg-from-pin/doc" "share:${BASEDIR}/OPAM/pkg-from-pin/share" "etc:${BASEDIR}/OPAM/pkg-from-pin/etc" "build:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28" "hash:" "dev:true" "build-id:" "opamfile:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/packages/i-am-a-pin-pkg.6.28/opam" "installed-files:" (CWD=${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/remove/i-am-a-pin-pkg.6.28)
- ...removing...
- opam-version:++current++
- switch:pkg-from-pin
- jobs:2
- root:${BASEDIR}/OPAM
- make:make
- name:i-am-a-pin-pkg
- version:6.28
- depends:dep.1
- installed:true
- enable:
- pinned:true
- bin:${BASEDIR}/OPAM/pkg-from-pin/bin
- sbin:${BASEDIR}/OPAM/pkg-from-pin/sbin
- lib:${BASEDIR}/OPAM/pkg-from-pin/lib
- man:${BASEDIR}/OPAM/pkg-from-pin/man
- doc:${BASEDIR}/OPAM/pkg-from-pin/doc
- share:${BASEDIR}/OPAM/pkg-from-pin/share
- etc:${BASEDIR}/OPAM/pkg-from-pin/etc
- build:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/build/i-am-a-pin-pkg.6.28
- hash:
- dev:true
- build-id:
- opamfile:${BASEDIR}/OPAM/pkg-from-pin/.opam-switch/packages/i-am-a-pin-pkg.6.28/opam
- installed-files:
-> removed   i-am-a-pin-pkg.6.28
Done.
